{% extends 'base.html' %}
{% block content %}



<!-- stored d3 files in base.html -->


<div class="container-fluid">
	<div class="row-fluid">
		 <div class="col-md-3" id="card-summary">
		 	<strong>Card Info:</strong>

			<!-- for loop in jinjia! -->
			{% for card in query_results %}
				<br>
				<br>
				Card name: {{card.card_name}}
				<br>
				Card debt: {{card.card_debt }}	
				<br>
				Card apr: {{card.card_apr}}
				<br>
				Card time to pay off: {{card.card_date}}
				<br>
			{% endfor %}
			<br>
			<br>
		 </div>
  		<div class="col-md-9" id="main">
  			<div class="col-xs-12 col-md-12 col-lg-12" id="visualization">
				Visualization:
				<div id="viz1">
					<script type="text/javascript">
						//Width and height
						var w = 500;
						var h = 300;
						var padding = 30;
						
						//Dynamic, random dataset
						var dataset = [];					//Initialize empty array
						var numDataPoints = 50;				//Number of dummy data points to create
						var xRange = Math.random() * 1000;	//Max range of new x values
						var yRange = Math.random() * 1000;	//Max range of new y values
						for (var i = 0; i < numDataPoints; i++) {					//Loop numDataPoints times
							var newNumber1 = Math.floor(Math.random() * xRange);	//New random integer
							var newNumber2 = Math.floor(Math.random() * yRange);	//New random integer
							dataset.push([newNumber1, newNumber2]);					//Add new number to array
						}
						//Create scale functions
						var xScale = d3.scale.linear()
											 .domain([0, d3.max(dataset, function(d) { return d[0]; })])
											 .range([padding, w - padding * 2]);
						var yScale = d3.scale.linear()
											 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
											 .range([h - padding, padding]);
						var rScale = d3.scale.linear()
											 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
											 .range([2, 5]);
						var formatAsPercentage = d3.format(".1%");
						//Define X axis
						var xAxis = d3.svg.axis()
										  .scale(xScale)
										  .orient("bottom")
										  .ticks(5)
										  .tickFormat(formatAsPercentage);
						//Define Y axis
						var yAxis = d3.svg.axis()
										  .scale(yScale)
										  .orient("left")
										  .ticks(5)
										  .tickFormat(formatAsPercentage);
						//Create SVG element
						var svg = d3.select("#viz1")
									.append("svg")
									.attr("width", w)
									.attr("height", h);
						//Create circles
						svg.selectAll("circle")
						   .data(dataset)
						   .enter()
						   .append("circle")
						   .attr("cx", function(d) {
						   		return xScale(d[0]);
						   })
						   .attr("cy", function(d) {
						   		return yScale(d[1]);
						   })
						   .attr("r", function(d) {
						   		return rScale(d[1]);
						   });
			
						
						//Create X axis
						svg.append("g")
							.attr("class", "axis")
							.attr("transform", "translate(0," + (h - padding) + ")")
							.call(xAxis);
						
						//Create Y axis
						svg.append("g")
							.attr("class", "axis")
							.attr("transform", "translate(" + padding + ",0)")
							.call(yAxis);
					</script>
				</div>
				

				<div id="viz3">
					Viz 3: 
					
				</div>


			</div>

	 
			<div class="col-xs-6 col-md-6 col-lg-6">
				<div id="sugg_plan">
					<br>
					<br>
					Suggested
						<br>
						<br>
						<!--  convert to strings -->
						<strong>Total Suggested Debt Decreasing (Debt, Int, Payment):</strong>
						{{all_totals[1].to_html(classes="table table-striped") | safe}}
						
						<br>
						<br>
				</div>
			</div>

			<div class="col-xs-6 col-md-6 col-lg-6">
				<div id="min_plan">
						<br>
						<br>
						Minimum
						<br>
						<br>
						<strong>Total Minimum Debt (Debt, Int, Payment):</strong>
						{{all_totals[0].to_html(classes="table table-striped") | safe}}
						<br>	
						<br>
						<br>
				</div>
			</div>
		</div>
	</div>
</div>





<div id="action">
	Take action div.
	<!--  add in a note here that if a card doesn't have 0apr, suggest to switch to a 0 apr
	ONLY if they can pay it off within that date... -->
</div>

<!-- Use this! http://getbootstrap.com/examples/dashboard/ -->



{% endblock %}


